# çµæ´»èµ„æºå®šä»·ç³»ç»Ÿ - å®æ–½æ€»ç»“ ğŸ“Š

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

å·²å®Œæˆè´¹ç±³é›†ç¾¤çš„**çµæ´»èµ„æºå®šä»·ç³»ç»Ÿ**ï¼Œæ”¯æŒç®—åŠ›ã€ç½‘ç»œã€å­˜å‚¨èµ„æºçš„**å››çº§åˆ†å±‚å®šä»·ç­–ç•¥**ï¼Œå®ç°å·®å¼‚åŒ–å®šä»·å’Œå®šä»·ç»§æ‰¿ã€‚

---

## âœ… æ ¸å¿ƒåŠŸèƒ½

### 1. å››çº§åˆ†å±‚å®šä»·

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®šä»·å±‚çº§ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  4ï¸âƒ£ èŠ‚ç‚¹å®šä»·ï¼ˆNode Pricingï¼‰                    â”‚
â”‚     â””â”€ ä¼˜å…ˆçº§æœ€é«˜ï¼Œè¦†ç›–æ‰€æœ‰ä¸Šå±‚ä»·æ ¼             â”‚
â”‚                                                  â”‚
â”‚  3ï¸âƒ£ èµ„æºæ± å®šä»·ï¼ˆPool Pricingï¼‰                  â”‚
â”‚     â””â”€ è¦†ç›–å¯ç”¨åŒºå’Œé»˜è®¤ä»·æ ¼                     â”‚
â”‚                                                  â”‚
â”‚  2ï¸âƒ£ å¯ç”¨åŒºå®šä»·ï¼ˆZone Pricingï¼‰                  â”‚
â”‚     â””â”€ è¦†ç›–é»˜è®¤ä»·æ ¼                             â”‚
â”‚                                                  â”‚
â”‚  1ï¸âƒ£ é»˜è®¤å®šä»·ï¼ˆDefault Pricingï¼‰                 â”‚
â”‚     â””â”€ å…¨å±€åŸºå‡†ä»·æ ¼ï¼Œä¼˜å…ˆçº§æœ€ä½                 â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å®šä»·ç»§æ‰¿è§„åˆ™

**æ ¸å¿ƒé€»è¾‘**ï¼šèµ„æºè‹¥æ— é¢å¤–é…ç½®åˆ™è‡ªåŠ¨ä½¿ç”¨ä¸Šå±‚å®šä»·

```typescript
// æŸ¥è¯¢ä»·æ ¼æ—¶çš„ç»§æ‰¿é“¾
æŸ¥è¯¢: å¯ç”¨åŒºA â†’ èµ„æºæ± 1 â†’ èŠ‚ç‚¹001 â†’ A100-40GB

ç»§æ‰¿é¡ºåº:
1. æ£€æŸ¥èŠ‚ç‚¹001æ˜¯å¦æœ‰A100-40GBå®šä»· âœ“ æ‰¾åˆ° â†’ ä½¿ç”¨
2. æœªæ‰¾åˆ° â†’ æ£€æŸ¥èµ„æºæ± 1æ˜¯å¦æœ‰A100-40GBå®šä»·
3. æœªæ‰¾åˆ° â†’ æ£€æŸ¥å¯ç”¨åŒºAæ˜¯å¦æœ‰A100-40GBå®šä»·
4. æœªæ‰¾åˆ° â†’ ä½¿ç”¨é»˜è®¤A100-40GBå®šä»·
```

### 3. æ”¯æŒçš„èµ„æºç±»å‹

- **GPU**ï¼šå„å‹å·GPUå¡ï¼ˆA100ã€V100ã€T4ç­‰ï¼‰
- **CPU**ï¼šCPUæ ¸å¿ƒ
- **å†…å­˜**ï¼šå†…å­˜å®¹é‡
- **å­˜å‚¨**ï¼šSSDã€HDDç­‰å­˜å‚¨ç±»å‹
- **ç½‘ç»œ**ï¼šå…¥ç½‘/å‡ºç½‘æµé‡

### 4. çµæ´»è®¡è´¹å‘¨æœŸ

- æŒ‰å°æ—¶ï¼ˆhourlyï¼‰
- æŒ‰å¤©ï¼ˆdailyï¼‰
- æŒ‰æœˆï¼ˆmonthlyï¼‰

---

## ğŸ“ æ–‡ä»¶ç»“æ„

### æ–°å¢æ–‡ä»¶

```
/
â”œâ”€â”€ services/
â”‚   â””â”€â”€ pricingService.ts                    # å®šä»·æœåŠ¡ï¼ˆæ ¸å¿ƒï¼‰
â”‚
â”œâ”€â”€ components/pages/
â”‚   â””â”€â”€ FlexiblePricingManagementPage.tsx    # å®šä»·ç®¡ç†é¡µé¢
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ FLEXIBLE_PRICING_GUIDE.md            # ä½¿ç”¨æŒ‡å—
    â””â”€â”€ README_FLEXIBLE_PRICING.md           # æœ¬æ–‡æ¡£
```

### ä¿®æ”¹æ–‡ä»¶

```
/App.tsx                                     # æ·»åŠ è·¯ç”±
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è®¿é—®å®šä»·ç®¡ç†é¡µé¢

```bash
# å¯åŠ¨åº”ç”¨
npm run dev

# è®¿é—®å®šä»·ç®¡ç†
http://localhost:5173/flexible-pricing-management
```

### ä¸»è¦åŠŸèƒ½

1. **æŸ¥çœ‹å®šä»·è§„åˆ™** - æŒ‰èŒƒå›´ï¼ˆé»˜è®¤/å¯ç”¨åŒº/èµ„æºæ± /èŠ‚ç‚¹ï¼‰åˆ†ç»„æŸ¥çœ‹
2. **åˆ›å»ºå®šä»·è§„åˆ™** - æ–°å»ºå››çº§å®šä»·é…ç½®
3. **ç¼–è¾‘å®šä»·è§„åˆ™** - ä¿®æ”¹ç°æœ‰å®šä»·
4. **åˆ é™¤å®šä»·è§„åˆ™** - ç§»é™¤ä¸éœ€è¦çš„å®šä»·
5. **æµ‹è¯•å®šä»·æŸ¥è¯¢** - éªŒè¯å®šä»·ç»§æ‰¿é“¾å’Œå®é™…ä»·æ ¼

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šè®¾ç½®é»˜è®¤GPUä»·æ ¼

```typescript
// åˆ›å»ºé»˜è®¤å®šä»·è§„åˆ™
{
  scope: 'default',
  resourceType: 'gpu',
  resourceSpec: 'A100-40GB',
  pricePerUnit: 25.0,
  unit: 'å¡Â·å°æ—¶',
  billingCycle: 'hourly',
  currency: 'CNY',
  enabled: true,
  description: 'NVIDIA A100 40GBé»˜è®¤ä»·æ ¼'
}
```

**æ•ˆæœ**ï¼šæ‰€æœ‰æœªé…ç½®ç‰¹æ®Šä»·æ ¼çš„A100-40GBèµ„æºéƒ½å°†ä½¿ç”¨Â¥25.0/å¡Â·å°æ—¶

---

### ç¤ºä¾‹2ï¼šæˆéƒ½å¯ç”¨åŒºä¼˜æƒ ä»·

```typescript
// åˆ›å»ºå¯ç”¨åŒºå®šä»·è§„åˆ™
{
  scope: 'zone',
  scopeId: 'zone-001',
  scopeName: 'æˆéƒ½å¯ç”¨åŒºA',
  resourceType: 'gpu',
  resourceSpec: 'A100-40GB',
  pricePerUnit: 23.0,
  unit: 'å¡Â·å°æ—¶',
  billingCycle: 'hourly',
  currency: 'CNY',
  enabled: true,
  description: 'æˆéƒ½å¯ç”¨åŒºç”µåŠ›æˆæœ¬ä½ï¼Œæä¾›ä¼˜æƒ ä»·'
}
```

**æ•ˆæœ**ï¼š
- æˆéƒ½å¯ç”¨åŒºAçš„A100-40GBï¼šÂ¥23.0/å¡Â·å°æ—¶ï¼ˆè¦†ç›–é»˜è®¤Â¥25.0ï¼‰
- å…¶ä»–å¯ç”¨åŒºçš„A100-40GBï¼šÂ¥25.0/å¡Â·å°æ—¶ï¼ˆä½¿ç”¨é»˜è®¤ä»·ï¼‰

---

### ç¤ºä¾‹3ï¼šé«˜æ€§èƒ½èµ„æºæ± æº¢ä»·

```typescript
// åˆ›å»ºèµ„æºæ± å®šä»·è§„åˆ™
{
  scope: 'pool',
  scopeId: 'pool-001',
  scopeName: 'é«˜æ€§èƒ½GPUèµ„æºæ± ',
  resourceType: 'gpu',
  resourceSpec: 'V100-32GB',
  pricePerUnit: 20.0,
  unit: 'å¡Â·å°æ—¶',
  billingCycle: 'hourly',
  currency: 'CNY',
  enabled: true,
  description: 'é…ç½®NVMeå­˜å‚¨å’Œä¸‡å…†ç½‘ç»œ'
}
```

**æ•ˆæœ**ï¼š
- é«˜æ€§èƒ½GPUèµ„æºæ± çš„V100ï¼šÂ¥20.0/å¡Â·å°æ—¶
- å…¶ä»–èµ„æºæ± çš„V100ï¼šÂ¥18.0/å¡Â·å°æ—¶ï¼ˆä½¿ç”¨é»˜è®¤ä»·ï¼‰

---

### ç¤ºä¾‹4ï¼šç‰¹å®šèŠ‚ç‚¹æµ‹è¯•ä»·

```typescript
// åˆ›å»ºèŠ‚ç‚¹å®šä»·è§„åˆ™
{
  scope: 'node',
  scopeId: 'node-001',
  scopeName: 'GPU-Node-001',
  resourceType: 'gpu',
  resourceSpec: 'A100-40GB',
  pricePerUnit: 22.0,
  unit: 'å¡Â·å°æ—¶',
  billingCycle: 'hourly',
  currency: 'CNY',
  enabled: true,
  description: 'æ–°è®¾å¤‡æµ‹è¯•ä¼˜æƒ ä»·'
}
```

**æ•ˆæœ**ï¼š
- èŠ‚ç‚¹GPU-001çš„A100ï¼šÂ¥22.0/å¡Â·å°æ—¶ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
- åŒèµ„æºæ± å…¶ä»–èŠ‚ç‚¹ï¼šÂ¥23.0/å¡Â·å°æ—¶ï¼ˆä½¿ç”¨å¯ç”¨åŒºä»·ï¼‰

---

## ğŸ”§ APIä½¿ç”¨

### 1. æŸ¥è¯¢èµ„æºä»·æ ¼

```typescript
import { queryPricing } from '@/services/pricingService';

// æŸ¥è¯¢GPUä»·æ ¼ï¼ˆå®Œæ•´ä¸Šä¸‹æ–‡ï¼‰
const pricing = await queryPricing({
  resourceType: 'gpu',
  resourceSpec: 'A100-40GB',
  zoneId: 'zone-001',      // æˆéƒ½å¯ç”¨åŒºA
  poolId: 'pool-001',      // é«˜æ€§èƒ½GPUèµ„æºæ± 
  nodeId: 'node-001',      // GPU-Node-001
});

// ç»“æœ
console.log(pricing);
/*
{
  pricePerUnit: 22.0,
  unit: 'å¡Â·å°æ—¶',
  billingCycle: 'hourly',
  currency: 'CNY',
  appliedRule: { ... },  // åº”ç”¨çš„å®šä»·è§„åˆ™
  scopeChain: ['default', 'zone:zone-001', 'node:node-001']  // ç»§æ‰¿é“¾
}
*/
```

### 2. è®¡ç®—èµ„æºè´¹ç”¨

```typescript
import { calculateResourceCost } from '@/services/pricingService';

// è®¡ç®—2å¼ A100è¿è¡Œ24å°æ—¶çš„è´¹ç”¨
const cost = await calculateResourceCost(
  'gpu',              // èµ„æºç±»å‹
  'A100-40GB',        // èµ„æºè§„æ ¼
  2,                  // æ•°é‡ï¼š2å¡
  24,                 // æ—¶é•¿ï¼š24å°æ—¶
  {
    zoneId: 'zone-001',
    poolId: 'pool-001',
    nodeId: 'node-001',
  }
);

console.log(cost);
/*
{
  totalCost: 1056.0,           // 2å¡ Ã— 24h Ã— Â¥22.0
  pricePerUnit: 22.0,
  unit: 'å¡Â·å°æ—¶',
  appliedRule: { ... },
  scopeChain: ['default', 'zone:zone-001', 'node:node-001']
}
*/
```

### 3. æ‰¹é‡æŸ¥è¯¢ä»·æ ¼

```typescript
import { batchQueryPricing } from '@/services/pricingService';

const queries = [
  { resourceType: 'gpu', resourceSpec: 'A100-40GB', zoneId: 'zone-001' },
  { resourceType: 'cpu', zoneId: 'zone-001' },
  { resourceType: 'memory', zoneId: 'zone-001' },
];

const results = await batchQueryPricing(queries);

console.log(results);
/*
{
  'gpu:A100-40GB': { pricePerUnit: 23.0, ... },
  'cpu': { pricePerUnit: 0.5, ... },
  'memory': { pricePerUnit: 0.1, ... }
}
*/
```

### 4. ç®¡ç†å®šä»·è§„åˆ™

```typescript
import { 
  getAllPricingRules,
  getPricingRulesByScope,
  savePricingRule,
  deletePricingRule 
} from '@/services/pricingService';

// è·å–æ‰€æœ‰è§„åˆ™
const allRules = await getAllPricingRules();

// è·å–å¯ç”¨åŒºè§„åˆ™
const zoneRules = await getPricingRulesByScope('zone', 'zone-001');

// åˆ›å»ºæ–°è§„åˆ™
const newRule = await savePricingRule({
  scope: 'zone',
  scopeId: 'zone-002',
  scopeName: 'åŒ—äº¬å¯ç”¨åŒºA',
  resourceType: 'storage',
  resourceSpec: 'SSD',
  pricePerUnit: 0.6,
  unit: 'GBÂ·æœˆ',
  billingCycle: 'monthly',
  currency: 'CNY',
  enabled: true,
});

// åˆ é™¤è§„åˆ™
await deletePricingRule('rule-id-123');
```

---

## ğŸ“Š é¡µé¢åŠŸèƒ½è¯¦è§£

### 1. å®šä»·è§„åˆ™è¡¨æ ¼

**å±•ç¤ºä¿¡æ¯**ï¼š
- èŒƒå›´ï¼ˆé»˜è®¤/å¯ç”¨åŒº/èµ„æºæ± /èŠ‚ç‚¹ï¼‰
- èµ„æºç±»å‹ï¼ˆGPU/CPU/å†…å­˜/å­˜å‚¨/ç½‘ç»œï¼‰
- èµ„æºè§„æ ¼ï¼ˆA100-40GBç­‰ï¼‰
- å•ä»·ï¼ˆå¸¦è´§å¸ç¬¦å·ï¼‰
- è®¡è´¹å•ä½ï¼ˆå¡Â·å°æ—¶ç­‰ï¼‰
- è®¡è´¹å‘¨æœŸï¼ˆæŒ‰å°æ—¶/å¤©/æœˆï¼‰
- çŠ¶æ€ï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰

**æ“ä½œæŒ‰é’®**ï¼š
- ç¼–è¾‘ï¼šä¿®æ”¹å®šä»·è§„åˆ™
- åˆ é™¤ï¼šç§»é™¤å®šä»·è§„åˆ™

---

### 2. ç­›é€‰å’Œæœç´¢

**ç­›é€‰å™¨**ï¼š
- èŒƒå›´ç­›é€‰ï¼šå…¨éƒ¨/é»˜è®¤/å¯ç”¨åŒº/èµ„æºæ± /èŠ‚ç‚¹
- èµ„æºç±»å‹ç­›é€‰ï¼šå…¨éƒ¨/GPU/CPU/å†…å­˜/å­˜å‚¨/ç½‘ç»œ

**æœç´¢æ¡†**ï¼š
- æ”¯æŒæœç´¢èµ„æºè§„æ ¼ã€èŒƒå›´åç§°ã€æè¿°
- å®æ—¶æœç´¢ï¼Œå³æ—¶åé¦ˆ

---

### 3. æ ‡ç­¾é¡µåˆ†ç»„

**æ ‡ç­¾é¡µ**ï¼š
- å…¨éƒ¨ï¼šæ˜¾ç¤ºæ‰€æœ‰è§„åˆ™
- é»˜è®¤å®šä»·ï¼šåªæ˜¾ç¤ºé»˜è®¤è§„åˆ™
- å¯ç”¨åŒºï¼šåªæ˜¾ç¤ºå¯ç”¨åŒºè§„åˆ™
- èµ„æºæ± ï¼šåªæ˜¾ç¤ºèµ„æºæ± è§„åˆ™
- èŠ‚ç‚¹ï¼šåªæ˜¾ç¤ºèŠ‚ç‚¹è§„åˆ™

**æ˜¾ç¤ºæ•°é‡**ï¼šæ¯ä¸ªæ ‡ç­¾æ˜¾ç¤ºå¯¹åº”è§„åˆ™æ•°é‡

---

### 4. åˆ›å»º/ç¼–è¾‘å¯¹è¯æ¡†

**è¡¨å•å­—æ®µ**ï¼š
- **å®šä»·èŒƒå›´**ï¼šä¸‹æ‹‰é€‰æ‹©ï¼ˆå¿…å¡«ï¼‰
- **èŒƒå›´ID**ï¼šæ–‡æœ¬è¾“å…¥ï¼ˆéé»˜è®¤æ—¶å¿…å¡«ï¼‰
- **èŒƒå›´åç§°**ï¼šæ–‡æœ¬è¾“å…¥ï¼ˆå¯é€‰ï¼‰
- **èµ„æºç±»å‹**ï¼šä¸‹æ‹‰é€‰æ‹©ï¼ˆå¿…å¡«ï¼‰
- **èµ„æºè§„æ ¼**ï¼šæ–‡æœ¬è¾“å…¥ï¼ˆå¯é€‰ï¼‰
- **å•ä»·**ï¼šæ•°å­—è¾“å…¥ï¼ˆå¿…å¡«ï¼‰
- **è®¡è´¹å•ä½**ï¼šæ–‡æœ¬è¾“å…¥ï¼ˆå¿…å¡«ï¼‰
- **è®¡è´¹å‘¨æœŸ**ï¼šä¸‹æ‹‰é€‰æ‹©ï¼ˆå¿…å¡«ï¼‰
- **æè¿°**ï¼šæ–‡æœ¬è¾“å…¥ï¼ˆå¯é€‰ï¼‰
- **ç”Ÿæ•ˆæ—¥æœŸ**ï¼šæ—¥æœŸæ—¶é—´é€‰æ‹©ï¼ˆå¿…å¡«ï¼‰
- **å¤±æ•ˆæ—¥æœŸ**ï¼šæ—¥æœŸæ—¶é—´é€‰æ‹©ï¼ˆå¯é€‰ï¼‰
- **å¯ç”¨çŠ¶æ€**ï¼šå¼€å…³ï¼ˆé»˜è®¤å¼€å¯ï¼‰

**éªŒè¯è§„åˆ™**ï¼š
- å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º
- å•ä»·å¿…é¡»ä¸ºæ­£æ•°
- æ—¥æœŸæ ¼å¼å¿…é¡»æ­£ç¡®
- å¤±æ•ˆæ—¥æœŸå¿…é¡»æ™šäºç”Ÿæ•ˆæ—¥æœŸ

---

### 5. æµ‹è¯•å®šä»·æŸ¥è¯¢

**è¾“å…¥å­—æ®µ**ï¼š
- èµ„æºç±»å‹ï¼ˆå¿…é€‰ï¼‰
- èµ„æºè§„æ ¼ï¼ˆå¯é€‰ï¼‰
- å¯ç”¨åŒºIDï¼ˆå¯é€‰ï¼‰
- èµ„æºæ± IDï¼ˆå¯é€‰ï¼‰
- èŠ‚ç‚¹IDï¼ˆå¯é€‰ï¼‰

**æŸ¥è¯¢ç»“æœ**ï¼š
- **å•ä»·**ï¼šå®é™…åº”ç”¨çš„ä»·æ ¼
- **è®¡è´¹å•ä½**ï¼šå¦‚ `å¡Â·å°æ—¶`
- **å®šä»·ç»§æ‰¿é“¾**ï¼šå¯è§†åŒ–å±•ç¤ºä»·æ ¼æ¥æº
  ```
  default â†’ zone:zone-001 â†’ node:node-001
  ```
- **åº”ç”¨çš„å®šä»·è§„åˆ™**ï¼šè¯¦ç»†ä¿¡æ¯
  - è§„åˆ™ID
  - èŒƒå›´
  - åç§°
  - æè¿°

---

## ğŸ¨ UIè®¾è®¡ç‰¹ç‚¹

### é¢œè‰²ä½“ç³»

- **é»˜è®¤å®šä»·**ï¼šç°è‰²ï¼ˆslateï¼‰
- **å¯ç”¨åŒºå®šä»·**ï¼šè“è‰²ï¼ˆblueï¼‰
- **èµ„æºæ± å®šä»·**ï¼šç´«è‰²ï¼ˆpurpleï¼‰
- **èŠ‚ç‚¹å®šä»·**ï¼šç»¿è‰²ï¼ˆgreenï¼‰

### å›¾æ ‡ä½“ç³»

- **é»˜è®¤å®šä»·**ï¼šğŸŒ Globe
- **å¯ç”¨åŒºå®šä»·**ï¼šğŸ“ Layers
- **èµ„æºæ± å®šä»·**ï¼šğŸ“¦ Box
- **èŠ‚ç‚¹å®šä»·**ï¼šğŸ–¥ï¸ Server

### èµ„æºç±»å‹å›¾æ ‡

- **GPU**ï¼šâš¡ Zap
- **CPU**ï¼šğŸ’» Cpu
- **å†…å­˜**ï¼šğŸ’¾ HardDrive
- **å­˜å‚¨**ï¼šğŸ—„ï¸ Database
- **ç½‘ç»œ**ï¼šğŸŒ Network

---

## ğŸ“‹ é¢„è®¾æ•°æ®

ç³»ç»Ÿå·²é¢„è®¾å®Œæ•´çš„é»˜è®¤å®šä»·è§„åˆ™ï¼š

### GPUå®šä»·

| å‹å· | å•ä»· | å•ä½ | å‘¨æœŸ |
|------|------|------|------|
| A100-40GB | Â¥25.0 | å¡Â·å°æ—¶ | æŒ‰å°æ—¶ |
| A100-80GB | Â¥35.0 | å¡Â·å°æ—¶ | æŒ‰å°æ—¶ |
| V100-32GB | Â¥18.0 | å¡Â·å°æ—¶ | æŒ‰å°æ—¶ |
| T4-16GB | Â¥8.0 | å¡Â·å°æ—¶ | æŒ‰å°æ—¶ |

### CPU/å†…å­˜å®šä»·

| èµ„æº | å•ä»· | å•ä½ | å‘¨æœŸ |
|------|------|------|------|
| CPUæ ¸å¿ƒ | Â¥0.5 | æ ¸Â·å°æ—¶ | æŒ‰å°æ—¶ |
| å†…å­˜ | Â¥0.1 | GBÂ·å°æ—¶ | æŒ‰å°æ—¶ |

### å­˜å‚¨å®šä»·

| ç±»å‹ | å•ä»· | å•ä½ | å‘¨æœŸ |
|------|------|------|------|
| SSD | Â¥0.5 | GBÂ·æœˆ | æŒ‰æœˆ |
| HDD | Â¥0.2 | GBÂ·æœˆ | æŒ‰æœˆ |

### ç½‘ç»œå®šä»·

| æµé‡ | å•ä»· | å•ä½ | å‘¨æœŸ |
|------|------|------|------|
| å‡ºç½‘æµé‡ | Â¥0.8 | GB | æŒ‰å°æ—¶ |
| å…¥ç½‘æµé‡ | Â¥0.0 | GB | æŒ‰å°æ—¶ |

### ç¤ºä¾‹è¦†ç›–è§„åˆ™

**å¯ç”¨åŒºå®šä»·**ï¼š
- æˆéƒ½å¯ç”¨åŒºAçš„A100-40GBï¼šÂ¥23.0/å¡Â·å°æ—¶
- åŒ—äº¬å¯ç”¨åŒºAçš„SSDï¼šÂ¥0.6/GBÂ·æœˆ

**èµ„æºæ± å®šä»·**ï¼š
- é«˜æ€§èƒ½GPUèµ„æºæ± çš„V100-32GBï¼šÂ¥20.0/å¡Â·å°æ—¶

**èŠ‚ç‚¹å®šä»·**ï¼š
- GPU-Node-001çš„A100-40GBï¼šÂ¥22.0/å¡Â·å°æ—¶

---

## ğŸ”— é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ

### 1. åœ¨è®¢å•åˆ›å»ºæ—¶æŸ¥è¯¢ä»·æ ¼

```typescript
// åœ¨CreateInstanceDialog.tsxä¸­
import { queryPricing } from '@/services/pricingService';

const handleCreateInstance = async () => {
  // æŸ¥è¯¢GPUä»·æ ¼
  const gpuPricing = await queryPricing({
    resourceType: 'gpu',
    resourceSpec: selectedGpuType,
    zoneId: selectedZone,
    poolId: selectedPool,
    nodeId: selectedNode,
  });

  // è®¡ç®—é¢„ä¼°è´¹ç”¨
  const totalCost = gpuPricing.pricePerUnit * gpuCount * duration;
  
  // æ˜¾ç¤ºç»™ç”¨æˆ·
  setEstimatedCost(totalCost);
};
```

### 2. åœ¨è®¡è´¹æœåŠ¡ä¸­ä½¿ç”¨

```typescript
// åœ¨billingService.tsä¸­
import { calculateResourceCost } from '@/services/pricingService';

export async function calculateOrderCost(order: Order) {
  // è®¡ç®—GPUè´¹ç”¨
  const gpuCost = await calculateResourceCost(
    'gpu',
    order.gpuType,
    order.gpuCount,
    order.duration,
    {
      zoneId: order.zoneId,
      poolId: order.poolId,
      nodeId: order.nodeId,
    }
  );

  // è®¡ç®—CPUè´¹ç”¨
  const cpuCost = await calculateResourceCost(
    'cpu',
    undefined,
    order.cpuCores,
    order.duration,
    {
      zoneId: order.zoneId,
      poolId: order.poolId,
      nodeId: order.nodeId,
    }
  );

  // è¿”å›æ€»è´¹ç”¨
  return {
    gpuCost: gpuCost.totalCost,
    cpuCost: cpuCost.totalCost,
    totalCost: gpuCost.totalCost + cpuCost.totalCost,
  };
}
```

### 3. åœ¨è´¹ç”¨é¢„ä¼°ä¸­æ˜¾ç¤º

```typescript
// åœ¨OrderDetailsDialog.tsxä¸­
const [pricing, setPricing] = useState<any>(null);

useEffect(() => {
  loadPricing();
}, [resourceConfig]);

const loadPricing = async () => {
  const result = await queryPricing({
    resourceType: 'gpu',
    resourceSpec: resourceConfig.gpuType,
    zoneId: resourceConfig.zoneId,
    poolId: resourceConfig.poolId,
    nodeId: resourceConfig.nodeId,
  });
  
  setPricing(result);
};

// æ˜¾ç¤º
<div>
  <p>å•ä»·ï¼š{formatCurrency(pricing.pricePerUnit)}</p>
  <p>ç»§æ‰¿é“¾ï¼š{pricing.scopeChain.join(' â†’ ')}</p>
  <p>é¢„ä¼°è´¹ç”¨ï¼š{formatCurrency(totalCost)}</p>
</div>
```

---

## âœ… åŠŸèƒ½æ£€æŸ¥æ¸…å•

### æ ¸å¿ƒåŠŸèƒ½
- [x] å››çº§åˆ†å±‚å®šä»·ï¼ˆé»˜è®¤/å¯ç”¨åŒº/èµ„æºæ± /èŠ‚ç‚¹ï¼‰
- [x] å®šä»·ç»§æ‰¿è§„åˆ™
- [x] æ”¯æŒ5ç§èµ„æºç±»å‹
- [x] æ”¯æŒ3ç§è®¡è´¹å‘¨æœŸ
- [x] ç”Ÿæ•ˆ/å¤±æ•ˆæ—¥æœŸæ§åˆ¶
- [x] å¯ç”¨/ç¦ç”¨çŠ¶æ€

### ç®¡ç†ç•Œé¢
- [x] å®šä»·è§„åˆ™åˆ—è¡¨å±•ç¤º
- [x] æŒ‰èŒƒå›´åˆ†ç»„ï¼ˆæ ‡ç­¾é¡µï¼‰
- [x] èŒƒå›´ç­›é€‰
- [x] èµ„æºç±»å‹ç­›é€‰
- [x] æœç´¢åŠŸèƒ½
- [x] åˆ›å»ºå®šä»·è§„åˆ™
- [x] ç¼–è¾‘å®šä»·è§„åˆ™
- [x] åˆ é™¤å®šä»·è§„åˆ™
- [x] æµ‹è¯•å®šä»·æŸ¥è¯¢

### APIæœåŠ¡
- [x] queryPricing - æŸ¥è¯¢å•ä¸ªä»·æ ¼
- [x] batchQueryPricing - æ‰¹é‡æŸ¥è¯¢ä»·æ ¼
- [x] calculateResourceCost - è®¡ç®—èµ„æºè´¹ç”¨
- [x] getAllPricingRules - è·å–æ‰€æœ‰è§„åˆ™
- [x] getPricingRulesByScope - æŒ‰èŒƒå›´è·å–è§„åˆ™
- [x] savePricingRule - ä¿å­˜è§„åˆ™
- [x] deletePricingRule - åˆ é™¤è§„åˆ™

### æ•°æ®å’Œæ ·å¼
- [x] é¢„è®¾é»˜è®¤å®šä»·æ•°æ®
- [x] é¢„è®¾ç¤ºä¾‹è¦†ç›–è§„åˆ™
- [x] ç»Ÿä¸€çš„é¢œè‰²ä½“ç³»
- [x] ç»Ÿä¸€çš„å›¾æ ‡ä½“ç³»
- [x] å“åº”å¼å¸ƒå±€

---

## ğŸ“ ä¸‹ä¸€æ­¥è®¡åˆ’

### åŠŸèƒ½å¢å¼º
1. **æ‰¹é‡æ“ä½œ**
   - æ‰¹é‡å¯¼å…¥å®šä»·è§„åˆ™ï¼ˆExcel/CSVï¼‰
   - æ‰¹é‡å¯¼å‡ºå®šä»·è§„åˆ™
   - æ‰¹é‡å¯ç”¨/ç¦ç”¨è§„åˆ™

2. **å†å²è®°å½•**
   - å®šä»·å˜æ›´å†å²
   - å˜æ›´åŸå› è®°å½•
   - å®¡è®¡æ—¥å¿—

3. **å®šä»·æ¨¡æ¿**
   - é¢„å®šä¹‰å®šä»·æ¨¡æ¿
   - ä¸€é”®åº”ç”¨æ¨¡æ¿
   - æ¨¡æ¿ç®¡ç†

4. **å¯è§†åŒ–**
   - å®šä»·å¯¹æ¯”å›¾è¡¨
   - ç»§æ‰¿é“¾å¯è§†åŒ–
   - æˆæœ¬è¶‹åŠ¿åˆ†æ

5. **æ™ºèƒ½å»ºè®®**
   - åŸºäºå†å²æ•°æ®çš„å®šä»·å»ºè®®
   - å¼‚å¸¸ä»·æ ¼å‘Šè­¦
   - æˆæœ¬ä¼˜åŒ–å»ºè®®

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ä½¿ç”¨æŒ‡å—](/FLEXIBLE_PRICING_GUIDE.md) - è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜
- [APIæ–‡æ¡£](/services/pricingService.ts) - å®Œæ•´çš„APIæ³¨é‡Š

---

## ğŸ‰ æ€»ç»“

çµæ´»èµ„æºå®šä»·ç³»ç»Ÿå·²å®Œæˆå¹¶å¯æŠ•å…¥ä½¿ç”¨ï¼

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- âœ… æ”¯æŒå››çº§åˆ†å±‚å®šä»·ï¼Œçµæ´»å·®å¼‚åŒ–
- âœ… å®šä»·è‡ªåŠ¨ç»§æ‰¿ï¼Œç®€åŒ–è¿ç»´
- âœ… å®Œæ•´çš„ç®¡ç†ç•Œé¢ï¼Œæ˜“äºé…ç½®
- âœ… ä¸°å¯Œçš„APIæ¥å£ï¼Œæ˜“äºé›†æˆ
- âœ… ç±»å‹å®‰å…¨ï¼Œä»£ç å¥å£®

**é€‚ç”¨åœºæ™¯**ï¼š
- å¤šå¯ç”¨åŒºå®šä»·å·®å¼‚
- é«˜/ä½ç«¯èµ„æºæ± å·®å¼‚
- ç‰¹æ®ŠèŠ‚ç‚¹ä¿ƒé”€
- æµ‹è¯•ç¯å¢ƒä¼˜æƒ 
- ä¸´æ—¶æ´»åŠ¨å®šä»·

**è®¿é—®åœ°å€**ï¼š
```
http://localhost:5173/flexible-pricing-management
```

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸš€

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**å®Œæˆæ—¥æœŸ**: 2024-12-06  
**å¼€å‘å›¢é˜Ÿ**: è´¹ç±³é›†ç¾¤å¼€å‘å›¢é˜Ÿ
